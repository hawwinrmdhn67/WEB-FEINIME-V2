{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Stream4nzu/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport axios from 'axios';\n\nexport const API_BASE = 'http://localhost:4000/anime/zoro';\n\n// ============================\n// Tipe Anime yang Diperluas\n// ============================\nexport interface Anime {\n  animeId?: string; \n  mal_id?: string | number; \n  title: string;\n  image?: string; // URL gambar sederhana (dari Consumet)\n  url: string;\n  type: string;\n  episodes?: number;\n  duration?: string;\n  sub?: number;\n  dub?: number;\n  japaneseTitle?: string;\n  nsfw?: boolean;\n\n  // Properti Detail (dari Jikan/MAL)\n  title_english?: string; // BARU: Digunakan di watch page\n  synopsis?: string;      // BARU: Digunakan di watch page\n  score?: number | null; \n  genres?: Array<{ \n    mal_id: number;\n    type: string;\n    name: string;\n    url: string;\n  }>;\n\n  // Struktur gambar kompleks (dibuat opsional agar kompatibel dengan data Consumet)\n  images?: { \n    jpg: {\n      image_url: string;\n      small_image_url?: string; \n      large_image_url?: string; \n    };\n    // Dibuat opsional agar tidak menimbulkan error 2430\n    webp?: { \n      image_url: string;\n      small_image_url: string;\n      large_image_url: string;\n    };\n  };\n}\n\n// ============================\n// Tipe Episode Streaming\n// ============================\n\nexport interface EpisodeLinks {\n  sources: Array<{ url: string; quality?: string; isM3U8?: boolean }>;\n  subtitles: Array<{ url: string; lang?: string }>;\n  animeId: string;\n  episodeId: string;\n}\n\n// ============================\n// Helper function untuk fetch\n// ============================\nasync function fetchAnime(endpoint: string, page: number = 1): Promise<Anime[]> {\n  try {\n    const res = await axios.get(`${API_BASE}/${endpoint}?page=${page}`);\n    const data = res.data?.results || [];\n    return data.map((item: any) => ({\n      animeId: item.id,\n      title: item.title,\n      image: item.image,\n      url: item.url,\n      type: item.type,\n      episodes: item.episodes,\n      duration: item.duration,\n      sub: item.sub,\n      dub: item.dub,\n      japaneseTitle: item.japaneseTitle,\n      nsfw: item.nsfw,\n    }));\n  } catch (err) {\n    console.error(`Error in fetchAnime(${endpoint}):`, err);\n    return [];\n  }\n}\n\n// ============================\n// API functions\n// ============================\n\nexport async function getRecentEpisodes(page: number = 1): Promise<Anime[]> {\n  return fetchAnime('recent-episodes', page);\n}\n\nexport async function getPopularAnime(page: number = 1): Promise<Anime[]> {\n  return fetchAnime('popular', page);\n}\n\nexport async function getTopAnime(page: number = 1): Promise<Anime[]> {\n  return fetchAnime('top', page);\n}\n\nexport async function searchAnime(query: string, page: number = 1): Promise<Anime[]> {\n  try {\n    const res = await axios.get(`${API_BASE}/search?query=${encodeURIComponent(query)}&page=${page}`);\n    const data = res.data?.results || [];\n    return data.map((item: any) => ({\n      animeId: item.id,\n      title: item.title,\n      image: item.image,\n      url: item.url,\n      type: item.type,\n      episodes: item.episodes,\n      duration: item.duration,\n      sub: item.sub,\n      dub: item.dub,\n      japaneseTitle: item.japaneseTitle,\n      nsfw: item.nsfw\n    }));\n  } catch (err) {\n    console.error('Error in searchAnime:', err);\n    return [];\n  }\n}\n\nexport async function getAnimeDetail(animeId: string): Promise<Anime | null> {\n  try {\n    const res = await axios.get(`${API_BASE}/info/${animeId}`);\n    const item = res.data;\n    if (!item) return null;\n\n    // Mapping properti dasar Consumet\n    return {\n      animeId: item.id,\n      title: item.title,\n      image: item.image,\n      url: item.url,\n      type: item.type,\n      episodes: item.episodes,\n      duration: item.duration,\n      sub: item.sub,\n      dub: item.dub,\n      japaneseTitle: item.japaneseTitle,\n      nsfw: item.nsfw,\n      \n      // Jika API /info mengembalikan detail tambahan, map di sini:\n      title_english: item.title_english,\n      synopsis: item.synopsis,\n      // images: item.images, // Tambahkan jika tersedia di respons API\n    };\n  } catch (err) {\n    console.error('Error in getAnimeDetail:', err);\n    return null;\n  }\n}\n\nexport async function getEpisodeStreamingLinks(animeId: string, episodeId: string): Promise<EpisodeLinks | null> {\n    try {\n        const res = await axios.get(`${API_BASE}/watch/${episodeId}`);\n        const data = res.data;\n\n        if (!data || data.sources.length === 0) return null;\n\n        return {\n            sources: data.sources || [],\n            subtitles: data.subtitles || [],\n            animeId: animeId,\n            episodeId: episodeId,\n        } as EpisodeLinks;\n\n    } catch (err) {\n        console.error(`Error fetching streaming links for ${episodeId}:`, err);\n        return null;\n    }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Stream4nzu/app/anime/%5Bid%5D/page.tsx"],"sourcesContent":["// app/anime/[id]/page.tsx\n\nimport { getAnimeDetail } from '@/lib/api'; // Pastikan path ke api.ts benar\nimport { notFound } from 'next/navigation';\n\n// Import atau definisikan tipe yang relevan\nimport type { AxiosError } from 'axios'; // Jika Anda menggunakan Axios\n\n// --- Helper Function untuk Type Narrowing ---\n// Memastikan error adalah AxiosError dan memiliki properti response\nfunction isAxiosError(error: any): error is AxiosError {\n  return (error as AxiosError).isAxiosError !== undefined;\n}\n// ---------------------------------------------\n\n\ninterface AnimePageProps {\n  params: { id: string }; \n}\n\nexport default async function AnimePage({ params }: AnimePageProps) {\n    \n    // PERBAIKAN 1: Menggunakan await pada params untuk mengatasi Promise Error\n    const resolvedParams = await params;\n    const rawSlug = resolvedParams.id;\n\n    // PERBAIKAN 2: Mengurai ID Numerik (MAL ID) dari slug\n    const parts = rawSlug.split('-');\n    const malId = parts.pop(); \n\n    if (!malId || isNaN(Number(malId))) {\n        return notFound(); \n    }\n    \n    let anime = null\n    try {\n        // Panggil API dengan ID numerik (malId)\n        anime = await getAnimeDetail(malId); \n    } catch (e) {\n        // âœ… PERBAIKAN 3: Menangani 'e is of type unknown' menggunakan type narrowing\n        \n        console.error(`Error fetching detail for ID ${malId}:`, e); // Baris 38\n\n        // Cek apakah error adalah AxiosError (yang Anda gunakan untuk cek 404)\n        if (isAxiosError(e) && e.response) {\n            // Cek status code 404 (Not Found)\n            if (e.response.status === 404) {\n                return notFound();\n            }\n        }\n\n        // Tangani error lainnya\n        return <div>An unexpected error occurred while loading anime details.</div>;\n    }\n\n    if (!anime) {\n        return notFound();\n    }\n\n    // --- Lanjutkan rendering halaman ---\n    return (\n        <main className=\"container py-8\">\n            <h1 className=\"text-3xl font-bold\">{anime.title}</h1>\n            <p className=\"mt-4\">{anime.synopsis}</p>\n            \n            <div className=\"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div>\n                    <h3 className=\"font-semibold\">Score:</h3>\n                    <p>{anime.score ?? 'N/A'}</p>\n                </div>\n                <div>\n                    <h3 className=\"font-semibold\">Episodes:</h3>\n                    <p>{anime.episodes ?? 'N/A'}</p>\n                </div>\n                {/* Tambahkan elemen seperti studio, genre, dll. */}\n            </div>\n            \n        </main>\n    )\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;AAE1B,yLAA4C,gCAAgC;AAC5E;AAAA;;;;AAKA,+CAA+C;AAC/C,oEAAoE;AACpE,SAAS,aAAa,KAAU;IAC9B,OAAO,AAAC,MAAqB,YAAY,KAAK;AAChD;AAQe,eAAe,UAAU,EAAE,MAAM,EAAkB;IAE9D,2EAA2E;IAC3E,MAAM,iBAAiB,MAAM;IAC7B,MAAM,UAAU,eAAe,EAAE;IAEjC,sDAAsD;IACtD,MAAM,QAAQ,QAAQ,KAAK,CAAC;IAC5B,MAAM,QAAQ,MAAM,GAAG;IAEvB,IAAI,CAAC,SAAS,MAAM,OAAO,SAAS;QAChC,OAAO,IAAA,iMAAQ;IACnB;IAEA,IAAI,QAAQ;IACZ,IAAI;QACA,wCAAwC;QACxC,QAAQ,MAAM,IAAA,4HAAc,EAAC;IACjC,EAAE,OAAO,GAAG;QACR,6EAA6E;QAE7E,QAAQ,KAAK,CAAC,CAAC,6BAA6B,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,WAAW;QAEvE,uEAAuE;QACvE,IAAI,aAAa,MAAM,EAAE,QAAQ,EAAE;YAC/B,kCAAkC;YAClC,IAAI,EAAE,QAAQ,CAAC,MAAM,KAAK,KAAK;gBAC3B,OAAO,IAAA,iMAAQ;YACnB;QACJ;QAEA,wBAAwB;QACxB,qBAAO,8OAAC;sBAAI;;;;;;IAChB;IAEA,IAAI,CAAC,OAAO;QACR,OAAO,IAAA,iMAAQ;IACnB;IAEA,sCAAsC;IACtC,qBACI,8OAAC;QAAK,WAAU;;0BACZ,8OAAC;gBAAG,WAAU;0BAAsB,MAAM,KAAK;;;;;;0BAC/C,8OAAC;gBAAE,WAAU;0BAAQ,MAAM,QAAQ;;;;;;0BAEnC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,8OAAC;0CAAG,MAAM,KAAK,IAAI;;;;;;;;;;;;kCAEvB,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,8OAAC;0CAAG,MAAM,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;;;;;;AAO1C"}}]
}