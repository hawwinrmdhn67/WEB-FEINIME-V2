{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Stream4nzu/lib/api.ts"],"sourcesContent":["// lib/api.ts\nimport axios from 'axios';\n\nexport const API_BASE = 'http://localhost:4000/anime/zoro';\n\n// ============================\n// Tipe Anime yang Diperluas\n// ============================\nexport interface Anime {\n  animeId?: string; // ID Consumet/Zoro (string/slug)\n  mal_id?: string | number; // ID MyAnimeList (numerik)\n  title: string;\n  image?: string; // URL gambar sederhana (dari Consumet)\n  url: string;\n  type: string;\n  episodes?: number;\n  duration?: string;\n  sub?: number;\n  dub?: number;\n  japaneseTitle?: string;\n  nsfw?: boolean;\n\n  // Properti Detail\n  title_english?: string; \n  synopsis?: string;      \n  score?: number | null; \n  genres?: Array<{ \n    mal_id: number;\n    type: string;\n    name: string;\n    url: string;\n  }>;\n\n  // Struktur gambar kompleks (untuk kompatibilitas)\n  images?: { \n    jpg: {\n      image_url: string;\n      small_image_url?: string; \n      large_image_url?: string; \n    };\n    webp?: { \n      image_url: string;\n      small_image_url: string;\n      large_image_url: string;\n    };\n  };\n}\n\n// ============================\n// Tipe Episode Streaming\n// ============================\n\nexport interface EpisodeLinks {\n  sources: Array<{ url: string; quality?: string; isM3U8?: boolean }>;\n  subtitles: Array<{ url: string; lang?: string }>;\n  animeId: string;\n  episodeId: string;\n}\n\n// ============================\n// Helper function untuk fetch\n// ============================\nasync function fetchAnime(endpoint: string, page: number = 1): Promise<Anime[]> {\n  try {\n    const res = await axios.get(`${API_BASE}/${endpoint}?page=${page}`);\n    const data = res.data?.results || [];\n    return data.map((item: any) => ({\n      animeId: item.id,\n      title: item.title,\n      image: item.image,\n      url: item.url,\n      type: item.type,\n      episodes: item.episodes,\n      duration: item.duration,\n      sub: item.sub,\n      dub: item.dub,\n      japaneseTitle: item.japaneseTitle,\n      nsfw: item.nsfw,\n      // Penting: Jika API ini memberikan mal_id, masukkan di sini\n      // mal_id: item.malId // contoh jika API Consumet/Zoro memberikan malId\n    }));\n  } catch (err) {\n    console.error(`Error in fetchAnime(${endpoint}):`, err);\n    return [];\n  }\n}\n\n// ============================\n// API functions\n// ============================\n\nexport async function getRecentEpisodes(page: number = 1): Promise<Anime[]> {\n  return fetchAnime('recent-episodes', page);\n}\n\nexport async function getPopularAnime(page: number = 1): Promise<Anime[]> {\n  return fetchAnime('popular', page);\n}\n\nexport async function getTopAnime(page: number = 1): Promise<Anime[]> {\n  return fetchAnime('top', page);\n}\n\nexport async function searchAnime(query: string, page: number = 1): Promise<Anime[]> {\n  try {\n    const res = await axios.get(`${API_BASE}/search?query=${encodeURIComponent(query)}&page=${page}`);\n    const data = res.data?.results || [];\n    return data.map((item: any) => ({\n      animeId: item.id,\n      title: item.title,\n      image: item.image,\n      url: item.url,\n      type: item.type,\n      episodes: item.episodes,\n      duration: item.duration,\n      sub: item.sub,\n      dub: item.dub,\n      japaneseTitle: item.japaneseTitle,\n      nsfw: item.nsfw\n    }));\n  } catch (err) {\n    console.error('Error in searchAnime:', err);\n    return [];\n  }\n}\n\nexport async function getAnimeDetail(animeId: string): Promise<Anime | null> {\n  try {\n    // Baris 128 (dalam kode sebelumnya), yang memicu 404\n    const res = await axios.get(`${API_BASE}/info/${animeId}`); \n    const item = res.data;\n    if (!item) return null;\n\n    // Mapping properti dasar Consumet\n    return {\n      animeId: item.id,\n      title: item.title,\n      image: item.image,\n      url: item.url,\n      type: item.type,\n      episodes: item.episodes,\n      duration: item.duration,\n      sub: item.sub,\n      dub: item.dub,\n      japaneseTitle: item.japaneseTitle,\n      nsfw: item.nsfw,\n      \n      // Detail tambahan:\n      title_english: item.title_english,\n      synopsis: item.synopsis,\n      // Pastikan item.malId dipetakan di sini jika tersedia di respons\n      // mal_id: item.malId, \n    };\n  } catch (err) {\n    console.error('Error in getAnimeDetail:', err);\n    // Melempar error agar page.tsx dapat menanganinya dengan notFound()\n    throw err; \n  }\n}\n\nexport async function getEpisodeStreamingLinks(animeId: string, episodeId: string): Promise<EpisodeLinks | null> {\n    try {\n        const res = await axios.get(`${API_BASE}/watch/${episodeId}`);\n        const data = res.data;\n\n        if (!data || data.sources.length === 0) return null;\n\n        return {\n            sources: data.sources || [],\n            subtitles: data.subtitles || [],\n            animeId: animeId,\n            episodeId: episodeId,\n        } as EpisodeLinks;\n\n    } catch (err) {\n        console.error(`Error fetching streaming links for ${episodeId}:`, err);\n        return null;\n    }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Stream4nzu/app/anime/%5Bid%5D/page.tsx"],"sourcesContent":["// app/anime/[id]/page.tsx\n'use server'\n\nimport { getAnimeDetail, Anime } from '@/lib/api'; \nimport { notFound } from 'next/navigation';\nimport type { AxiosError } from 'axios'; \n\n// Helper function untuk type narrowing pada error Axios\nfunction isAxiosError(error: any): error is AxiosError {\n  // Memeriksa properti khas Axios error\n  return (error as AxiosError).isAxiosError !== undefined;\n}\n\ninterface AnimePageProps {\n  params: { id: string }; \n}\n\nexport default async function AnimePage({ params }: AnimePageProps) {\n    \n    // ✅ FIX: Menggunakan await pada params untuk mengatasi Promise Error (Turbopack bug)\n    const resolvedParams = await params;\n    \n    // Mengambil ID Consumet/Zoro langsung dari router params\n    const animeId = resolvedParams.id; \n\n    let anime: Anime | null = null;\n    try {\n        // Memanggil API dengan ID Consumet/Zoro (contoh: \"uma-musume-pretty-derby-road-to-the-top\")\n        anime = await getAnimeDetail(animeId); \n    } catch (e) {\n        // ✅ FIX: Menangani 'e is of type unknown'\n        if (isAxiosError(e) && e.response) {\n            // Jika API Consumet/Zoro mengembalikan 404\n            if (e.response.status === 404) {\n                return notFound();\n            }\n        }\n        console.error(`Error fetching detail for ID ${animeId}:`, e);\n        return <div>An unexpected error occurred while loading anime details.</div>;\n    }\n\n    if (!anime || !anime.title) {\n        return notFound();\n    }\n\n    return (\n        <main className=\"container py-8\">\n            <h1 className=\"text-3xl font-bold\">{anime.title}</h1>\n            <p className=\"mt-4\">{anime.synopsis || 'No synopsis available.'}</p>\n            \n            <div className=\"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div>\n                    <h3 className=\"font-semibold\">Score:</h3>\n                    <p>{anime.score ?? 'N/A'}</p>\n                </div>\n                <div>\n                    <h3 className=\"font-semibold\">Episodes:</h3>\n                    <p>{anime.episodes ?? 'N/A'}</p>\n                </div>\n            </div>\n        </main>\n    )\n}"],"names":[],"mappings":"AAAA,0BAA0B;;;;;;;AAG1B;AACA;AAAA;;;;;;AAGA,wDAAwD;AACxD,SAAS,aAAa,KAAU;IAC9B,sCAAsC;IACtC,OAAO,AAAC,MAAqB,YAAY,KAAK;AAChD;AAMe,eAAe,UAAU,EAAE,MAAM,EAAkB;IAE9D,qFAAqF;IACrF,MAAM,iBAAiB,MAAM;IAE7B,yDAAyD;IACzD,MAAM,UAAU,eAAe,EAAE;IAEjC,IAAI,QAAsB;IAC1B,IAAI;QACA,4FAA4F;QAC5F,QAAQ,MAAM,IAAA,4HAAc,EAAC;IACjC,EAAE,OAAO,GAAG;QACR,0CAA0C;QAC1C,IAAI,aAAa,MAAM,EAAE,QAAQ,EAAE;YAC/B,2CAA2C;YAC3C,IAAI,EAAE,QAAQ,CAAC,MAAM,KAAK,KAAK;gBAC3B,OAAO,IAAA,iMAAQ;YACnB;QACJ;QACA,QAAQ,KAAK,CAAC,CAAC,6BAA6B,EAAE,QAAQ,CAAC,CAAC,EAAE;QAC1D,qBAAO,8OAAC;sBAAI;;;;;;IAChB;IAEA,IAAI,CAAC,SAAS,CAAC,MAAM,KAAK,EAAE;QACxB,OAAO,IAAA,iMAAQ;IACnB;IAEA,qBACI,8OAAC;QAAK,WAAU;;0BACZ,8OAAC;gBAAG,WAAU;0BAAsB,MAAM,KAAK;;;;;;0BAC/C,8OAAC;gBAAE,WAAU;0BAAQ,MAAM,QAAQ,IAAI;;;;;;0BAEvC,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,8OAAC;0CAAG,MAAM,KAAK,IAAI;;;;;;;;;;;;kCAEvB,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAAgB;;;;;;0CAC9B,8OAAC;0CAAG,MAAM,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;;;;;;AAK1C;;;IA7C8B;;AAAA,+OAAA"}},
    {"offset": {"line": 328, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Stream4nzu/.next-internal/server/app/anime/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {default as '40b85fd88fd740066fd1cba59550479bbd4fa5272f'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}